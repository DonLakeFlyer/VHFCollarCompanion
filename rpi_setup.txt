# GRC Block setup is based on this discussion: https://lists.gnu.org/archive/html/discuss-gnuradio/2017-03/msg00083.html

# Missing scripted hardware setup

- Turn on SSH/Serial Port
Make adapter discoverable using bluetoothctl

- Fixed screwed up bluez install
https://raspberrypi.stackexchange.com/questions/41776/failed-to-connect-to-sdp-server-on-ffffff000000-no-such-file-or-directory
/etc/systemd/system/dbus-org.bluez.service
ExecStart=/usr/lib/bluetooth/bluetoothd
to this
ExecStart=/usr/lib/bluetooth/bluetoothd --compat
ExecStartPost=/bin/chmod 777 /var/run/sdp
sudo systemctl daemon-reload
sudo systemctl restart bluetooth
sudo apt-get install blueman

- Add startup to crond
crontab -e
@reboot sudo /usr/bin/python /home/pi/repos/VHFCollarCompanion/PulseDetectCmdLineUDP.py --channel-index 0 > /home/pi/service.log 2>&1
@reboot sudo /usr/bin/python /home/pi/repos/VHFCollarCompanion/PulseDetectCmdLineBT.py

# Find rPi on network (OSX)
arp -na | grep -i b8:27:eb


# Misc info

Editor - nano
ps aux - list processes
sudo kill ### - kill process
sudo ifconfig - show ip address

# rPi service setup
cp vhf.service /lib/systemd/system
cp grc.service /lib/systemd/system
sudo chmod 644 /lib/systemd/system/vhf.service
sudo chmod 644 /lib/systemd/system/grc.service
sudo systemctl daemon-reload
sudo systemctl enable vhf.service
sudo systemctl enable grc.service
systemctl list-unit-files | grep enabled

# LCD setup - config.txt file on SD Card

max_usb_current=1
hdmi_group=2
hdmi_mode=1
hdmi_mode=87
hdmi_cvt 800 480 60 6 0 0 0

# SITL testing

make posix iris
python main.py --sitl True
python PulseDetectCmdLineUDP.py --localhost 1 (1 for Drone)

Modify posix-configs/SITL/init/ekf2/typhoon_h480
mavlink start -x -u 14557 -r 4000000 -m onboard -o 14540 -f

# Turn on UART?

enable_uart=1

# Service install

